# Chapter 22. Building Agent UI (NiceGUI / Streamlit)

**Simple dashboard for testing workflows**

---

#### 1. Why do we need a UI for agents?

So far, you’ve seen:

* Agents that **think and decide**
* APIs like `/predict` that **do work** in the background

But your **students / users** are not going to type Python code every time.

They want something simple like:

* A web page
* A text box to type input
* A button to “Ask the agent”
* A box to show the result

That small web page is your **Agent Dashboard**.

Think of it like:

> You built a powerful machine (agents + tools).
> Now you’re building the **remote control** so humans can use it easily.

We’ll do this with:

* **NiceGUI** (very simple UI framework in Python)
* You can do the same idea with **Streamlit** too.

---

#### 2. What will our UI do?

We’ll build a tiny page that:

1. Shows an input field (for example, a number or a text question)
2. Has a button like “Run Agent”
3. When clicked:

   * It sends the input to a backend function (your “agent”)
   * Shows the agent’s reply on the screen

At first, our “agent” can be a simple Python function.
Later, you replace that function with a real **Autogen agent** or a call to your **FastAPI `/predict`** endpoint.

---

#### 3. Using NiceGUI: Step-by-step

##### Step 1: Install NiceGUI

In your terminal:

```bash
pip install nicegui
```

##### Step 2: Create `ui_app.py`

This will be your agent dashboard.

```python
from nicegui import ui

# 1) This is our "agent" function for now.
#    Later, you can replace this with an Autogen call
#    or a call to FastAPI /predict endpoint.
def simple_agent(user_input: str) -> str:
    """
    Very simple fake 'agent':
    If the user types a number, we'll double it.
    Otherwise, we just echo back the text.
    """
    try:
        x = float(user_input)
        return f"The agent predicts: {2 * x}"
    except ValueError:
        return f"You said: {user_input}. (Agent yet to be connected!)"


# 2) Build the UI
with ui.row():
    ui.label('Simple Agent Dashboard').style('font-size: 24px; font-weight: bold;')

# Input field for the user
input_box = ui.input('Enter a number or a message') \
               .props('outlined')  # small styling

# Area to show agent response
output_label = ui.label('Agent response will appear here.')

# Button to send input to the agent
def on_run_click():
    user_text = input_box.value or ""
    response = simple_agent(user_text)
    output_label.text = response

ui.button('Run Agent', on_click=on_run_click, color='primary')

# Start the app
ui.run()
```

What is happening here (in plain words):

* `simple_agent()` is a **placeholder** for your real agent:

  * If input is a number → it doubles it.
  * Otherwise → it just repeats the text.
* `input_box` lets the user type something.
* `output_label` displays what the agent replied.
* `on_run_click()` is called when the button is pressed:

  * Reads the user input.
  * Calls the agent function.
  * Shows the response on the screen.

##### Step 3: Run the NiceGUI app

In your terminal:

```bash
python ui_app.py
```

NiceGUI will show a URL in the terminal, usually something like:

* `http://127.0.0.1:8080`

Open that in your browser.

Now you have:

* A simple **Agent Dashboard**
* You type something → click **Run Agent** → see response

---

#### 4. Connecting to a real agent or `/predict` later

Right now, `simple_agent()` is just a dummy function.

Later you can:

* Call your **Autogen agent** here
  (for example, a `run_agent(user_input)` function you already wrote)
* Or call your **FastAPI `/predict`** endpoint using `requests`:

Example (inside `simple_agent`):

```python
import requests

def simple_agent(user_input: str) -> str:
    try:
        x = float(user_input)
    except ValueError:
        return "Please enter a valid number for prediction."

    response = requests.post(
        "http://127.0.0.1:8000/predict",
        json={"x": x},
        timeout=5,
    )
    data = response.json()
    return f"The agent (via /predict) says: {data.get('prediction')}"
```

Now your UI:

* Reads input from the user
* Sends it to FastAPI `/predict`
* Shows the prediction from your “model service”

This is exactly how you test an **agentic workflow** end-to-end:

UI → Agent/Tool → API → Result back to UI.

---

#### 5. Very quick Streamlit version (for reference)

If you prefer Streamlit, here’s a tiny version of the same idea:

```python
# save as app.py
import streamlit as st

def simple_agent(user_input: str) -> str:
    try:
        x = float(user_input)
        return f"The agent predicts: {2 * x}"
    except ValueError:
        return f"You said: {user_input}. (Agent yet to be connected!)"

st.title("Simple Agent Dashboard")

user_input = st.text_input("Enter a number or a message")

if st.button("Run Agent"):
    reply = simple_agent(user_input)
    st.write("**Agent response:**", reply)
```

Run:

```bash
pip install streamlit
streamlit run app.py
```

---

#### 6. Takeaway

* A simple **web UI** makes your agents usable by normal people.
* NiceGUI / Streamlit let you build such UIs **with only Python**.
* The UI is just:

  * Input field
  * Button
  * Output area
* Behind the button, you can plug in:

  * Autogen agent
  * FastAPI `/predict`
  * Any other tool

This small dashboard is perfect for **demos**, **teaching**, and **debugging workflows**.

---

#### 7. Codex Instruction Prompt for this Chapter

You can give this to Codex:

> “Create a simple NiceGUI or Streamlit app with a form that collects user input, sends it to a Python function called run_agent(user_input), and displays the agent’s reply on the page. Add clear comments so beginners can understand each step.”
