# Chapter 7. Two Agents Talking

**One agent asks, another answers**

---

#### 1. What does “two agents talking” mean?

In the last chapter, we had **one assistant agent** talking directly to a human.

Now, imagine we have **two AIs**:

* **Agent A** → behaves like a *customer*
* **Agent B** → behaves like a *product expert / salesperson*

They **talk to each other** in natural language, like two people chatting.

You don’t have to script every sentence.
You just give each agent:

* A *role* (who they are)
* A *goal* (what they want to achieve)

Then Autogen lets them **chat back and forth** until the task is done.

---

#### 2. Real-life picture: Buying a laptop in a shop

Think of a **electronics store**:

* You walk in and tell the salesperson:
  “I need a laptop for online classes and light coding. Budget: ₹50,000.”

The salesperson:

* Asks a few questions:
  “Do you travel a lot?” “Do you need long battery life?”
* Checks different laptops.
* Recommends 1–2 best options within your budget.

Now imagine this:

* **Agent A** = Customer agent

  * Knows your budget, needs, preferences.
  * Keeps asking: “Can you find something with at least 8 GB RAM?”

* **Agent B** = Laptop expert agent

  * Knows about laptop models, specs, pros/cons.
  * Replies with options and explanations.

They talk like this:

* Agent A: “I need a laptop for programming and browsing within ₹50,000.”
* Agent B: “Okay, I suggest Model X and Model Y. Both have 8 GB RAM….”
* Agent A: “Can you find something with better battery life?”
* Agent B: “Then Model Y is better; battery lasts up to 8 hours…”

At the end, Agent A can **summarize** the best choice to show to the human.

---

#### 3. How Autogen helps with two-agent talks

Autogen makes this kind of setup easier:

1. You **create two agents** in Python

   * One with a “customer” system prompt
   * One with a “product expert” system prompt

2. You tell Autogen:
   “Let these two agents talk until they reach a decision or summary.”

3. Autogen handles the **turn-taking**:

   * Agent A speaks → Agent B replies → Agent A replies → …

This is called a **multi-agent chat**.

You can use this idea for many cases:

* Customer vs Sales expert
* Student vs Teacher
* Junior doctor vs Senior doctor
* Data engineer vs Data quality checker

---

#### 4. A simple laptop example (story with code feel)

Here is a **very small conceptual example** of how it looks in Python terms:

```python
from autogen import AssistantAgent, UserProxyAgent

# Agent A: customer-like agent
customer_agent = AssistantAgent(
    name="customer_agent",
    system_message=(
        "You are a customer trying to buy a laptop. "
        "Your budget is 50000 INR. Ask questions to get the best laptop for programming and online classes. "
        "When you are satisfied, say: FINAL DECISION and summarize the chosen laptop."
    ),
    llm_config={"model": "gpt-4o-mini", "temperature": 0.4}
)

# Agent B: laptop expert agent
expert_agent = AssistantAgent(
    name="laptop_expert",
    system_message=(
        "You are a laptop product expert. "
        "Recommend laptops available in India within 50000 INR budget. "
        "Ask clarifying questions if needed. Explain simply, like to a student."
    ),
    llm_config={"model": "gpt-4o-mini", "temperature": 0.3}
)

# A small "conversation manager" (UserProxyAgent often used to start & control)
manager = UserProxyAgent(
    name="conversation_manager",
    human_input_mode="NEVER"  # we don't want manual input during the loop
)

# Start the two-agent conversation
manager.initiate_chat(
    customer_agent,
    message="Start discussing with the laptop_expert to find the best laptop for me.",
    other_agents=[expert_agent]
)
```

In simple words:

* We create **customer_agent** with the goal: *find best laptop for me*.
* We create **laptop_expert** with the goal: *recommend good laptops simply*.
* We tell a manager: “Let them talk and figure it out.”
* Autogen runs the conversation until some stop condition is met (for example, when the customer says “FINAL DECISION”).

You, as the programmer, don’t write each line of the chat.
You only define:

* Who they are
* What they want
* When to stop

---

#### 5. Negotiation between two agents

You can also make the conversation more like a **negotiation**.

For example:

* **Agent A**: Wants the **lowest price** or **highest value**
* **Agent B**: Wants to **stay within some constraints** (stock limits, minimum price, etc.)

They can negotiate like two people:

* A: “That model is too expensive; can you offer something cheaper?”
* B: “I can lower the price by 5%, but not more, and still include 8 GB RAM.”
* A: “Okay, then suggest the best configuration at that price.”

In code, you just adjust their **system messages**:

* For Agent A: “Try to get the best possible laptop within or below the budget. Negotiate on price and features.”
* For Agent B: “Try to keep within realistic prices and not give unrealistic offers.”

Autogen will let them talk and **negotiate** using plain language.

---

#### 6. Takeaway

* Two agents can **talk to each other** like two people.
* One can act as a **customer**, the other as a **product expert**.
* This is useful for things like **laptop selection**, **plan comparison**, **offer negotiation**, etc.
* You control their **roles and goals**; Autogen handles the chat loop.
* Adding negotiation is as simple as changing their **instructions**.

---

### Codex task for this chapter

**Instruction for Codex:**

> “Generate Autogen code where Agent A negotiates with Agent B. Agent A is a budget-conscious customer trying to buy a laptop. Agent B is a laptop expert who suggests models and prices. Let them talk for a few turns and then have Agent A make a final decision. Add clear comments for beginners.”
