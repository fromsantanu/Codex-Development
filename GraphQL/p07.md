# Chapter 7. Queries — Asking for Data

---

## 1. Simple Heading

**Queries — Asking for Data in GraphQL**

---

## 2. Short Introduction

In GraphQL, a **Query** is like asking a question at a help desk.

You are not changing anything.
You are only saying:

* “Please show me this student.”
* “Please list all courses.”
* “Please give me details of one record.”

Queries are **read-only** operations.
They help the frontend fetch exactly the data it needs — nothing more, nothing less.

---

## 3. Use-case Story – School Help Desk

Imagine walking to a school help desk.

You might ask:

* “Can I see the list of all students?”
* “Can you show me details of student ID 102?”
* “What courses is this student enrolled in?”

The staff checks the records and shows you the answers.

In GraphQL, these become **queries**.

---

## 4. Code Examples

We will use the **student–course schema** from earlier.

### 4.1 Query 1 — List all students

This fetches all students with their `id`, `name`, and `email`.

```graphql
query {
  students {
    id
    name
    email
  }
}
```

### 4.2 Query 2 — Get one student by ID

Fetch a single student and also show their enrolled courses.

```graphql
query {
  student(id: "stu_101") {
    id
    name
    email
    courses {
      id
      title
    }
  }
}
```

### 4.3 Query 3 — List courses of a student

This is very common:
You want student details **plus** their course list in the same request.

```graphql
query {
  student(id: "stu_101") {
    name
    courses {
      id
      title
      description
    }
  }
}
```

Notice:

* GraphQL lets you **choose exactly the fields you want**.
* The same `student` query can return many shapes based on what you select.

---

### 4.4 REST vs GraphQL Comparison

**REST way**

```http
GET /students          # list students
GET /students/stu_101  # get student by id
GET /students/stu_101/courses  # list courses of that student
```

**GraphQL way**

Only **one endpoint**:

```graphql
query {
  student(id: "stu_101") {
    name
    courses {
      title
    }
  }
}
```

* REST: multiple URLs
* GraphQL: one URL, flexible “question”

---

### 4.5 Example resolver sketch (for clarity)

```js
const resolvers = {
  Query: {
    students: (_, __, ctx) => ctx.db.getAllStudents(),
    student: (_, args, ctx) => ctx.db.getStudentById(args.id),
  },
  Student: {
    courses: (student, _, ctx) => ctx.db.getCoursesForStudent(student.id)
  }
};
```

This shows how **queries** map to **functions**.

---

## 5. Simple Diagram

```text
Client (Frontend)
       |
       v
  GraphQL Query
       |
       v
  GraphQL Server
       |
       v
  Resolver Functions
       |
       v
Database / Microservices
```

---

## 6. “How to Instruct Codex” Prompts

These prompts will help Codex generate sample queries or improve your schemas.

### 6.1 Generate Sample Queries

> “Generate 3 sample GraphQL queries for the student-course schema: list all students, get one student by id, list courses of a student.”

### 6.2 Convert REST to GraphQL

> “Given these REST endpoints:
>
> GET /students
> GET /students/:id
> GET /students/:id/courses
>
> Generate equivalent GraphQL queries using the student-course schema.”

### 6.3 Explain a Query in Simple English

> “Here is a GraphQL query:
>
> ```graphql
> [PASTE QUERY]
> ```
>
> Explain in simple English what this query is asking for.”

### 6.4 Add More Fields to a Query

> “Take this query:
>
> ```graphql
> [PASTE QUERY]
> ```
>
> Modify it to include extra fields: course description, student email, and number of courses.”

---

## 7. Summary

1. A **Query** in GraphQL is a way to ask for data — like asking questions at a help desk.
2. Queries are **read-only** and return exactly the fields the client requests.
3. Codex can generate example queries, convert REST calls into queries, and explain complex queries in plain English.

