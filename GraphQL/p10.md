
# Chapter 10. Setting Up a GraphQL Server

---

## 1. Introduction

Setting up a GraphQL server is like opening a small help-desk counter.  
You give the server a simple “menu” of what questions it can answer.  
Here we will start with the smallest possible server: a **hello** message.  
This helps you understand the basic structure before adding real features.  
You can build this in either **Node.js (Apollo Server)** or **Python (Graphene/Ariadne)**.

---

## 2. Why This Matters

A GraphQL server is the centre point of your app.  
All frontends talk to this single place to get exactly the data they want.  
If the server is easy to set up, developers can experiment faster.  
Once this foundation is ready, you can plug in databases, microservices, and more.

---

## 3. Real-Life Example

Think of a **reception desk** in a hospital.  
Before you expand it into many counters and departments,  
you first set up a simple desk with one job:  
**“Say hello to the visitor.”**

This small beginning helps you understand the structure before adding complexity.

---

## 4. Code Examples

Below are two simple setups.  
Choose **Node (Apollo Server)** or **Python** depending on your comfort.

---

### Option A: Node.js with Apollo Server

#### Install commands

```bash
mkdir graphql-hello
cd graphql-hello
npm init -y
npm install @apollo/server graphql express body-parser cors
````

#### Simple server (index.js)

```js
const { ApolloServer } = require('@apollo/server');
const { expressMiddleware } = require('@apollo/server/express4');
const express = require('express');
const bodyParser = require('body-parser');
const cors = require('cors');

// 1. Schema = Menu
const typeDefs = `#graphql
  type Query {
    hello: String
  }
`;

// 2. Resolvers = Waiters
const resolvers = {
  Query: {
    hello: () => "Hello from Apollo!",
  },
};

async function start() {
  const app = express();
  const server = new ApolloServer({ typeDefs, resolvers });

  await server.start();
  app.use('/graphql', cors(), bodyParser.json(), expressMiddleware(server));

  app.listen(4000, () => console.log("GraphQL server running at http://localhost:4000/graphql"));
}

start();
```

---

### Option B: Python with Graphene

#### Install commands

```bash
mkdir graphql-hello
cd graphql-hello
pip install graphene flask flask-graphql
```

#### Simple server (app.py)

```python
from flask import Flask
from flask_graphql import GraphQLView
import graphene

# 1. Schema = Menu
class Query(graphene.ObjectType):
    hello = graphene.String()

    def resolve_hello(root, info):
        return "Hello from Graphene!"

schema = graphene.Schema(query=Query)

# 2. Flask Server
app = Flask(__name__)
app.add_url_rule(
    "/graphql",
    view_func=GraphQLView.as_view(
        "graphql",
        schema=schema,
        graphiql=True,   # Enables web UI
    ),
)

if __name__ == "__main__":
    app.run(debug=True)
```

---

### Option C: Python with Ariadne

#### Install commands

```bash
pip install ariadne flask
```

#### Simple server (app.py)

```python
from flask import Flask, request, jsonify
from ariadne import QueryType, gql, make_executable_schema, graphql_sync
from ariadne.constants import PLAYGROUND_HTML

type_defs = gql("""
    type Query {
        hello: String!
    }
""")

query = QueryType()

@query.field("hello")
def resolve_hello(_, info):
    return "Hello from Ariadne!"

schema = make_executable_schema(type_defs, query)

app = Flask(__name__)

@app.route("/graphql", methods=["GET"])
def graphql_playground():
    return PLAYGROUND_HTML, 200

@app.route("/graphql", methods=["POST"])
def graphql_server():
    data = request.get_json()
    success, result = graphql_sync(schema, data, context_value=request)
    return jsonify(result)

if __name__ == "__main__":
    app.run(debug=True)
```

---

## 5. Simple Diagram

```
Frontend (browser/app)
        ↓
   GraphQL Server
        ↓
Resolvers → Database / Microservices
```

Right now, your database layer is empty.
Only the “hello” waiter replies.
Soon you will add real data sources.

---

## 6. How to Instruct Codex

You can ask Codex to automate this setup with prompts like:

```
Codex, generate a minimal GraphQL server setup using Apollo Server. 
Include install commands, a simple Query type with “hello”, and 
start the server on port 4000.
```

```
Codex, create a GraphQL server using Python Graphene. 
Make one Query called hello returning a string. 
Add a simple Flask server and enable the graphiql UI.
```

```
Codex, generate an Ariadne-based GraphQL server with a single Query “hello”. 
Include schema, resolver, and Flask code.
```

---

## 7. Summary

1. You learned how to start a tiny GraphQL server in Node or Python.
2. You saw the roles of **schema** (menu) and **resolver** (waiter).
3. You now have a base to build bigger APIs, connect databases, and design real systems.

---



