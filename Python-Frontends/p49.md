# **Chapter 49. Packaging the App for Others to Run**

## **1. Simple Introduction**

You have built a nice frontend:

* maybe with Streamlit / NiceGUI / Gradio
* connected to APIs
* with some useful screens

Now you want **others** (students, colleagues, clients) to run it on their own computers or servers.

For that, you must:

1. Tell them **which Python packages** to install
2. Give them a **simple command** to start the app
3. Keep your **folders organized** so they don’t get confused

This chapter shows how to do that with:

* a `requirements.txt` file
* a `run_frontend.py` script
* a clean folder structure: `frontend/`, `backend/`, `common/`

---

## **2. Real-Life Analogy**

Imagine you are giving someone a **recipe**:

* You list ingredients → `requirements.txt`
* You give step-by-step “how to cook” → `run_frontend.py` + README
* You keep your kitchen organized (spices shelf, fridge, utensils) → folder structure

If the kitchen is a mess, or ingredients list is missing, the other person will struggle.

Packaging your app is like giving a **neat recipe + clean kitchen layout**.

---

## **3. Key Concepts (Explained Gently)**

### **requirements.txt**

A simple text file listing all Python libraries your project needs.

Example:

```text
nicegui
requests
python-dotenv
```

### **Startup Script (run_frontend.py)**

A small Python file that starts your frontend app with **one simple command**:

```bash
python run_frontend.py
```

### **Folder Structure**

How you arrange your project files so that:

* frontend code stays in `frontend/`
* backend APIs stay in `backend/`
* shared models / utilities stay in `common/`

---

## **4. Step-by-Step Explanation**

### **Step 1: Create `requirements.txt`**

From your project virtual environment, you can do:

```bash
pip freeze > requirements.txt
```

But for teaching and small projects, you can also **write it manually**:

```text
nicegui
requests
python-dotenv
uvicorn
fastapi
```

This tells others:
“Install these packages before running the app.”

Command for users:

```bash
pip install -r requirements.txt
```

---

### **Step 2: Decide on Folder Structure**

A simple, clean layout:

```text
project_root/
│
├─ frontend/
│   ├─ main_ui.py
│   └─ components/
│       └─ forms.py
│
├─ backend/
│   ├─ main_api.py
│   └─ models.py
│
├─ common/
│   ├─ config.py
│   └─ utils.py
│
├─ run_frontend.py
├─ run_backend.py
└─ requirements.txt
```

* **frontend/** → UI (Streamlit/NiceGUI/Gradio)
* **backend/** → FastAPI or other services
* **common/** → shared config, schemas, helpers

---

### **Step 3: Create a Simple Startup Script for Frontend**

Example `run_frontend.py`:

```python
"""
Simple starter for the frontend app.
Others can just run: python run_frontend.py
"""

from frontend.main_ui import start_app

if __name__ == "__main__":
    start_app()
```

And in `frontend/main_ui.py` (NiceGUI example):

```python
from nicegui import ui

def start_app():
    ui.label('Clinic Frontend')
    ui.run()
```

Now your user only needs to do:

```bash
pip install -r requirements.txt
python run_frontend.py
```

---

### **Step 4: Simple Startup Script for Backend (Optional)**

Example `run_backend.py`:

```python
"""
Start the backend API using Uvicorn.
"""

import uvicorn

if __name__ == "__main__":
    uvicorn.run("backend.main_api:app", host="0.0.0.0", port=8000, reload=True)
```

So the user can run:

```bash
python run_backend.py
```

---

### **Step 5: Add a Small Diagram in README**

You can show structure like this:

```text
Frontend (NiceGUI)  --->  Backend (FastAPI)  --->  Database
      |                      |
   run_frontend.py       run_backend.py
```

And folder view:

```text
frontend/  - all UI code
backend/   - all API code
common/    - shared logic, models
```

This helps people understand “where to look”.

---

## **5. Example UI Code (NiceGUI) Using Folder Layout**

`frontend/main_ui.py`:

```python
from nicegui import ui
from common.config import Config

def start_app():
    ui.label(f"Connected to backend: {Config.API_BASE_URL}")
    ui.run()
```

`common/config.py`:

```python
from dotenv import load_dotenv
import os

load_dotenv()

class Config:
    API_BASE_URL = os.getenv("API_BASE_URL", "http://localhost:8000")
```

So packaging + environment + structure come together.

---

## **6. Backend API Example (Simple)**

`backend/main_api.py`:

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/health")
def health_check():
    return {"status": "ok"}
```

Your frontend can call this endpoint to check if backend is running.

---

## **7. How Codex Can Help Here**

You can let Codex do a lot of packaging work.

Sample prompts:

1. **“Given this code, generate a requirements.txt with only the needed libraries.”**
2. **“Create a run_frontend.py script that starts my NiceGUI app from frontend/main_ui.py.”**
3. **“Refactor my project into frontend/, backend/, and common/ folders and update imports.”**
4. **“Write a README section explaining how to install and run frontend and backend separately.”**
5. **“Suggest a clean folder structure for a Python frontend + FastAPI backend app.”**

Codex can also **fix imports** after you rearrange folders.

---

## **8. Mini Exercises for Students**

### **Exercise 1**

Create a small project with this structure:

```text
project_root/
  frontend/main_ui.py
  backend/main_api.py
  common/config.py
  requirements.txt
  run_frontend.py
  run_backend.py
```

Fill in minimal working code.

---

### **Exercise 2**

Write a `requirements.txt` that includes at least:

* `nicegui` or `streamlit`
* `fastapi`
* `uvicorn`

Then test installation in a fresh virtual environment.

---

### **Exercise 3**

Ask Codex:

> “Generate a simple run_frontend.py and run_backend.py for my project. Here is my folder tree and code.”

Check if the generated scripts run correctly.

---
