# **Chapter 50. Deploying Python Frontends**

## **1. Simple Introduction**

After building a frontend with NiceGUI, Streamlit, or Gradio, the next step is to **make it available on the internet** so others can use it.

This chapter explains:

* how to deploy a Python frontend on a **VPS** (Virtual Private Server)
* how to share Streamlit/Gradio apps easily
* how to use **Docker** for simple deployment
* what to watch out for:

  * correct API URL
  * HTTPS
  * CORS (very simple idea)

We will explain everything using simple language so beginners can follow comfortably.

---

## **2. Real-Life Analogy**

Imagine you built a small shop inside your home:

* Only you can use it.
* Friends can’t buy anything unless they enter your house.

Deploying your frontend is like **moving your shop to a public market**, where:

* Anyone can visit
* They enter through a main gate (your domain)
* A security guard (reverse proxy) manages visitors
* You keep the kitchen (backend API) inside another room

---

## **3. Key Concepts (Explained Gently)**

### **VPS (Very Simple Meaning)**

A VPS is “your computer in the cloud” where you run apps 24×7.

### **Reverse Proxy (Easy Meaning)**

A program (like **Nginx**) that stands at the front door and routes traffic to your frontend.

Like a receptionist saying:
“You want the UI? Go here. You want the API? Go there.”

### **HTTPS**

Secure connection → your site has a lock symbol.

### **CORS (Very Simple Explanation)**

A security rule in browsers that says:
**“If your frontend is on domain A and backend is on domain B, ask for permission.”**

---

## **4. Step-by-Step Explanation**

---

## **Part A — Deploying a NiceGUI App on VPS**

### **Step 1: Install dependencies on VPS**

```bash
sudo apt update
sudo apt install python3-pip nginx
```

### **Step 2: Upload your project**

Use scp, git, or any method:

```
project_root/
  run_frontend.py
  frontend/
  common/
  requirements.txt
```

### **Step 3: Install Python packages**

```bash
pip install -r requirements.txt
```

### **Step 4: Run the frontend using uvicorn**

NiceGUI internally uses uvicorn:

```bash
python run_frontend.py
```

To make it permanent, use:

```bash
nohup python run_frontend.py &
```

### **Step 5: Configure Nginx as Reverse Proxy**

Create a config:

```
server {
    listen 80;
    server_name yourdomain.com;

    location / {
        proxy_pass http://127.0.0.1:8080;
    }
}
```

Restart Nginx:

```bash
sudo systemctl restart nginx
```

Now visiting **[http://yourdomain.com](http://yourdomain.com)** shows your NiceGUI app.

---

## **Part B — Deploying Streamlit Apps**

Streamlit offers:

### **Option 1: Streamlit Community Cloud (Free)**

Just upload your repo to GitHub.
Streamlit will automatically deploy it.

### **Option 2: Deploy on your VPS**

Run:

```bash
streamlit run frontend/app.py
```

Use Nginx reverse proxy similar to NiceGUI.

### **Option 3: Use Docker**

Dockerfile example:

```docker
FROM python:3.11
WORKDIR /app
COPY . .
RUN pip install -r requirements.txt
CMD ["streamlit", "run", "frontend/app.py", "--server.port=8080", "--server.address=0.0.0.0"]
```

Build and run:

```bash
docker build -t streamlit-app .
docker run -p 8080:8080 streamlit-app
```

---

## **Part C — Deploying Gradio Apps**

Gradio apps can be:

### **Option 1: Shared via Gradio Share Link**

Just run locally:

```bash
python your_gradio_app.py
```

It gives you a temporary public link.

### **Option 2: Deploy Like Streamlit**

Use VPS + Nginx reverse proxy.

### **Option 3: Deploy with Docker**

Same idea as Streamlit:
run on port 8080 → expose with Docker → reverse proxy.

---

## **Part D — Things to Watch For (Very Simple)**

### **1. API URL Must Be Correct**

* In development: often `http://localhost:8000`
* In production: `https://yourapi.com`

Store API URL in `.env` → load using your `Config` class.

### **2. HTTPS**

Browsers block many features if your site is HTTP.

Use **Let’s Encrypt**:

```bash
sudo certbot --nginx -d yourdomain.com
```

### **3. CORS (Super Simple Meaning)**

If your frontend runs at:

```
https://myfrontend.com
```

And backend at:

```
https://mybackend.com
```

your backend needs to say:

> “Yes, myfrontend.com is allowed to call me.”

In FastAPI you add:

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # or your exact domain
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## **5. Example Code (NiceGUI Deployment Config)**

### `run_frontend.py`

```python
from frontend.main_ui import start_app

if __name__ == "__main__":
    start_app()   # NiceGUI automatically uses uvicorn internally
```

### Nginx proxy snippet

```
location / {
    proxy_pass http://127.0.0.1:8080;
}
```

---

## **6. Example Backend API (Simple)**

```json
{ "status": "ok", "server": "production" }
```

Your frontend can test:

```python
requests.get(Config.API_BASE_URL + "/health")
```

---

## **7. How Codex Can Help Here**

You can use prompts like:

* **“Generate a Dockerfile for my Streamlit app that exposes port 8080.”**
* **“Write a simple Nginx reverse proxy config for NiceGUI running on port 8080.”**
* **“Rewrite my deployment instructions in step-by-step beginner language.”**
* **“Update my README with deployment steps for VPS + HTTPS.”**
* **“Generate CORS middleware code for FastAPI with only one allowed domain.”**

Codex is very good at producing startup scripts, Dockerfiles, and deployment checklists.

---

## **8. Mini Exercises for Students**

### **Exercise 1**

Deploy a small Streamlit app on Streamlit Cloud.

### **Exercise 2**

Write a Dockerfile for a Simple NiceGUI or Gradio app.

### **Exercise 3**

Create an Nginx config that proxies:

* `/ui` → frontend at 127.0.0.1:8080
* `/api` → backend at 127.0.0.1:8000

### **Exercise 4**

Enable simple CORS in a FastAPI backend.

---
