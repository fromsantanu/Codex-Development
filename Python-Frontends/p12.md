# **Chapter 12. Building Forms in Gradio**

---

## **1. Simple Introduction**

Gradio is one of the simplest tools for building small web apps using only Python.
You can create a webpage with **text boxes, dropdowns, buttons**, and connect them to a **backend function**.

When a user enters something and clicks a button, Gradio calls a Python function.
Inside that function, you can:

* Call your **backend API**,
* Process the data,
* Show results on the screen.

This makes Gradio perfect for small tools like:

* “Check account balance”
* “Book a service”
* “Calculate something”
* “Send a request”

---

## **2. Real-Life Analogy**

Think of Gradio as a **customer help desk window**:

* The customer gives information (enter account number).
* The receptionist presses a button (Submit).
* The receptionist checks the backend computer (API call).
* The receptionist shows the answer (balance, booking status).

Gradio does this on your screen.

---

## **3. Key Concepts (Explained Gently)**

### **Input Components**

Gradio has many simple input boxes:

* `gr.Textbox()` – type text or numbers
* `gr.Dropdown()` – choose from a list
* `gr.Number()` – enter a number
* `gr.Date()` – choose a date
* `gr.Checkbox()` – yes/no
* `gr.Radio()` – choose one option

---

### **Output Components**

Gradio can display:

* Text
* JSON
* Tables
* Messages

Example:

```python
gr.Textbox()
gr.JSON()
gr.Label()
```

---

### **Interface Function**

Every Gradio UI is connected to a **function**.

Example:

```python
def check_balance(account_id):
    # logic here
```

Gradio sends user input into this function automatically.

---

## **4. Step-by-Step: Calling a Backend API Through Gradio**

### **Step 1 — Import Gradio**

```python
import gradio as gr
```

---

### **Step 2 — Write the Function That Calls the API**

Example: checking account balance.

```python
import requests

def check_balance(account_id):
    try:
        response = requests.get(
            f"http://localhost:8000/bank/balance/{account_id}",
            timeout=5
        )

        if response.status_code == 200:
            data = response.json()
            return f"Balance: ₹{data['balance']}"
        else:
            return "Account not found."
    except Exception as e:
        return f"Error: {e}"
```

---

### **Step 3 — Create the Gradio Interface**

```python
ui = gr.Interface(
    fn=check_balance,
    inputs=gr.Textbox(label="Enter Account Number"),
    outputs=gr.Textbox(label="Account Balance")
)
```

---

### **Step 4 — Launch the App**

```python
ui.launch()
```

That’s it!
Gradio automatically creates a clean web UI.

---

## **5. Full Example: “Check Account Balance”**

```python
import gradio as gr
import requests

def check_balance(account_id):
    try:
        response = requests.get(
            f"http://localhost:8000/bank/balance/{account_id}",
            timeout=5
        )
        if response.status_code == 200:
            data = response.json()
            return f"Account Balance: ₹{data['balance']}"
        else:
            return "Account not found."
    except Exception as e:
        return f"Error connecting to server: {e}"

ui = gr.Interface(
    fn=check_balance,
    inputs=gr.Textbox(label="Account Number"),
    outputs=gr.Textbox(label="Balance")
)

ui.launch()
```

---

## **6. Another Example: “Book a Service”**

### **Backend API Expectation**

```
POST /service/book

{
  "name": "Santanu",
  "service": "AC Repair",
  "date": "2025-11-20"
}
```

Returns:

```json
{ "status": "confirmed" }
```

---

### **Gradio App**

```python
import gradio as gr
import requests

def book_service(name, service, date):
    try:
        payload = {
            "name": name,
            "service": service,
            "date": str(date)
        }

        response = requests.post(
            "http://localhost:8000/service/book",
            json=payload,
            timeout=5
        )

        if response.status_code == 201:
            return "Booking Confirmed ✅"
        else:
            return "Booking Failed ❌"

    except Exception as e:
        return f"Error contacting backend: {e}"

with gr.Blocks() as demo:
    gr.Markdown("### Book a Service")

    name = gr.Textbox(label="Your Name")
    service = gr.Dropdown(
        ["AC Repair", "Water Purifier", "Electrician"],
        label="Select Service"
    )
    date = gr.Textbox(label="Preferred Date (YYYY-MM-DD)")

    output = gr.Textbox(label="Response")

    btn = gr.Button("Book Now")

    btn.click(
        fn=book_service,
        inputs=[name, service, date],
        outputs=output
    )

demo.launch()
```

---

## **7. Simple Architecture Diagram**

```
User (Browser)
       │
       ▼
Gradio UI (form)
       │  calls function
       ▼
Your Python function
       │  requests.get/post
       ▼
Backend API
```

---

## **8. How Codex Can Help Here**

### **Prompt 1 – Build Input Form**

> “Generate a Gradio UI with a textbox for account number and a button that calls a function.”

### **Prompt 2 – Add API Call**

> “Modify this Gradio function to call the backend API GET /bank/balance/{account_id} using requests.”

### **Prompt 3 – Add Error Handling**

> “Improve this Gradio code by adding try/except and showing a friendly message if backend is down.”

### **Prompt 4 – Convert to Blocks Layout**

> “Convert this Interface() code into a Blocks version with labels and formatting.”

### **Prompt 5 – Build Booking App**

> “Create a Gradio app where user enters name, selects a service, picks a date, and sends POST request to /service/book.”

---

## **9. Mini Exercises for Students**

### **Exercise 1**

Create a Gradio form:

* Textbox → “Customer ID”
* Dropdown → “Product Type”
* Button → “Track Order”

Call an API:

```
GET /orders/track/{customer_id}/{product_type}
```

---

### **Exercise 2**

Create a simple calculator in Gradio:

* Two `gr.Number()` inputs
* Dropdown for operation (+, -, *, /)
* Output the result

---

### **Exercise 3**

Add error handling:

* If user enters empty name → return “Name required”
* If API is unreachable → return a clean error message

---

### **Exercise 4**

Make the UI prettier:

* Add a title
* Add a section header
* Add success/error emojis

---
