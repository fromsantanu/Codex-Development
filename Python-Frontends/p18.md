# **Chapter 18. Tables and Data Grids in Streamlit / NiceGUI**

## **1. Simple Introduction**

Many screens in real apps are just **lists in table form**:

* list of patients
* list of orders
* list of students
* list of tickets

To show these clearly, we use **tables** or **data grids**.

In this chapter, youâ€™ll learn:

* how to show tables in **Streamlit** (`st.table`, `st.dataframe`)
* how to show tables in **NiceGUI**
* how to add **pagination** (page 1, page 2â€¦)
* how to add a simple **search box** and **filter dropdown**

---

## **2. Real-Life Analogy**

Think about a **register book** in a school office.

* Each row = one student
* Each column = name, class, roll, phone, etc.
* You can **scan, search, and filter** using your eyes:

  * Find â€œall students in Class 10â€
  * Find â€œstudents whose name starts with Aâ€

A **table in a web app** is the same idea, but on-screen:

* Rows and columns
* Optional search box
* Optional filters
* Optional next/previous page

---

## **3. Key Concepts (Explained Gently)**

### âœ”ï¸ `st.table`

* Shows a simple static table.
* Good when data is small and doesnâ€™t need much interaction.

---

### âœ”ï¸ `st.dataframe`

* Shows an **interactive table**.
* User can scroll, sort columns, resize columns.
* Better for larger data.

---

### âœ”ï¸ NiceGUI `ui.table`

* NiceGUI has its own table component.
* You pass **rows** and **columns**, it shows the table.
* You can add **pagination** and **search** logic with Python.

---

### âœ”ï¸ Search Box

* A text input where user types something.
* You filter rows that contain that text (e.g., name contains â€œanâ€).

---

### âœ”ï¸ Filter Dropdown

* A dropdown box with options like:

  * â€œAllâ€
  * â€œActiveâ€
  * â€œInactiveâ€
* You show only rows that match the selected value.

---

### âœ”ï¸ Pagination

* Show **only a few rows per page**, like 10 at a time.
* Have buttons: â€œPreviousâ€ and â€œNextâ€.
* Helpful when you have many rows.

---

## **4. Step-by-Step Explanation**

Weâ€™ll think of a **Patient List** example.

### **Step 1: Prepare the data**

You may get data from:

* a Python list/dict
* a CSV file
* an API (`/patients`)

Convert it to a **Pandas DataFrame** (Streamlit) or a simple list of dicts (NiceGUI).

---

### **Step 2: Show a basic table**

* In Streamlit: `st.table(df)` or `st.dataframe(df)`
* In NiceGUI: `ui.table(columns=..., rows=...)`

---

### **Step 3: Add a search box**

* Add a text input.
* Filter rows where `name` contains the text.

---

### **Step 4: Add a filter dropdown**

* Example: filter by `status` (Active / Completed).
* When filter value changes, update the table.

---

### **Step 5: Add pagination**

* Decide a page size (like 5 rows per page).
* Compute start and end index from current page.
* Slice the list: `rows[start:end]`.

---

### **Step 6: Keep layout simple**

Donâ€™t crowd the screen.
Typical layout:

* Top row: search box + filter dropdown
* Middle: table
* Bottom: pagination buttons

---

## **5. Example UI Code â€“ Streamlit**

### ğŸ”¹ Simple table with search and filter

```python
import streamlit as st
import pandas as pd

st.title("Patient List (Streamlit)")

# --- Sample data ---
data = [
    {"name": "Rita", "status": "Active", "age": 32},
    {"name": "Amit", "status": "Active", "age": 45},
    {"name": "John", "status": "Completed", "age": 29},
    {"name": "Mira", "status": "Active", "age": 38},
    {"name": "Vikram", "status": "Completed", "age": 41},
]
df = pd.DataFrame(data)

# --- Search and Filter ---
search_text = st.text_input("Search by name:")
status_filter = st.selectbox("Filter by status:", ["All", "Active", "Completed"])

# Filter by status
if status_filter != "All":
    df = df[df["status"] == status_filter]

# Search by name (case-insensitive)
if search_text:
    df = df[df["name"].str.contains(search_text, case=False)]

# --- Show as table ---
st.subheader("Results")
st.dataframe(df)
```

Explanation:

* `st.text_input` â†’ search box
* `st.selectbox` â†’ filter
* `df[...]` â†’ filters the DataFrame
* `st.dataframe` â†’ interactive table

---

### ğŸ”¹ Simple pagination in Streamlit

```python
import streamlit as st
import pandas as pd

st.title("Patient List with Pagination")

# Sample data with more rows
data = [{"id": i, "name": f"Patient {i}"} for i in range(1, 51)]
df = pd.DataFrame(data)

page_size = 10

if "page" not in st.session_state:
    st.session_state.page = 1

page = st.session_state.page

# Calculate start and end
start = (page - 1) * page_size
end = start + page_size

st.write(f"Showing page {page}")
st.dataframe(df.iloc[start:end])

col1, col2 = st.columns(2)
if col1.button("Previous") and page > 1:
    st.session_state.page -= 1
if col2.button("Next") and end < len(df):
    st.session_state.page += 1
```

---

## **5b. Example UI Code â€“ NiceGUI**

### ğŸ”¹ Basic table with search and filter

```python
from nicegui import ui

data = [
    {"name": "Rita", "status": "Active", "age": 32},
    {"name": "Amit", "status": "Active", "age": 45},
    {"name": "John", "status": "Completed", "age": 29},
    {"name": "Mira", "status": "Active", "age": 38},
    {"name": "Vikram", "status": "Completed", "age": 41},
]

columns = [
    {"name": "name", "label": "Name", "field": "name"},
    {"name": "status", "label": "Status", "field": "status"},
    {"name": "age", "label": "Age", "field": "age"},
]

state = {"rows": data.copy()}

def update_table():
    # reset filtered rows
    rows = data.copy()

    # apply status filter
    status = status_select.value
    if status != 'All':
        rows = [r for r in rows if r["status"] == status]

    # apply search filter
    text = search_box.value.lower()
    if text:
        rows = [r for r in rows if text in r["name"].lower()]

    state["rows"] = rows
    table.rows = state["rows"]

with ui.row():
    search_box = ui.input("Search by name").on("update:model-value", lambda e: update_table())
    status_select = ui.select(["All", "Active", "Completed"], value="All").on("update:model-value", lambda e: update_table())

table = ui.table(columns=columns, rows=state["rows"])

ui.run()
```

Note:

* `ui.input` â†’ search box
* `ui.select` â†’ filter dropdown
* `update_table()` filters the original data and updates `table.rows`.

---

### ğŸ”¹ Simple pagination in NiceGUI

```python
from nicegui import ui

data = [{"id": i, "name": f"Patient {i}"} for i in range(1, 51)]

columns = [
    {"name": "id", "label": "ID", "field": "id"},
    {"name": "name", "label": "Name", "field": "name"},
]

page_size = 10
state = {"page": 1}

def current_page_rows():
    start = (state["page"] - 1) * page_size
    end = start + page_size
    return data[start:end]

def refresh_table():
    table.rows = current_page_rows()
    page_label.text = f"Page {state['page']}"

with ui.column():
    page_label = ui.label()
    table = ui.table(columns=columns, rows=current_page_rows())

    with ui.row():
        ui.button("Previous", on_click=lambda: change_page(-1))
        ui.button("Next", on_click=lambda: change_page(1))

def change_page(step: int):
    new_page = state["page"] + step
    max_page = (len(data) - 1) // page_size + 1
    if 1 <= new_page <= max_page:
        state["page"] = new_page
        refresh_table()

refresh_table()
ui.run()
```

---

## **6. Backend API Example (Simple)**

A typical backend endpoint for table data:

### **Request**

```http
GET /patients?status=Active&search=ri&page=1&page_size=10
```

### **Response**

```json
{
  "page": 1,
  "page_size": 10,
  "total": 2,
  "items": [
    {"name": "Rita", "status": "Active", "age": 32},
    {"name": "Rinki", "status": "Active", "age": 27}
  ]
}
```

Your frontend:

* sends `status`, `search`, and `page` as query parameters
* takes `items` and shows them in the table
* uses `total` to calculate number of pages

---

## **7. How Codex Helps You Here**

Here are some ready-to-use prompts.

### âœ”ï¸ Prompt 1 â€“ Build a basic table

> â€œCodex, generate a Streamlit app that shows a table using `st.dataframe` with dummy patient data.â€

### âœ”ï¸ Prompt 2 â€“ Add search and filter

> â€œCodex, enhance this Streamlit table to add a search box for patient name and a dropdown to filter by status.â€

### âœ”ï¸ Prompt 3 â€“ Add pagination

> â€œCodex, add pagination to this table in Streamlit so that only 10 rows are shown per page, with Next/Previous buttons.â€

### âœ”ï¸ Prompt 4 â€“ Convert to NiceGUI

> â€œCodex, convert this Streamlit table example into a NiceGUI app using `ui.table` with similar search and filter options.â€

### âœ”ï¸ Prompt 5 â€“ Connect to API

> â€œCodex, modify this table code to fetch data from a `/patients` API using `requests.get`, and handle empty or error responses safely.â€

---

## **8. Mini Exercises for Students**

### ğŸŸ¦ Exercise 1 â€“ Streamlit Search

Create a Streamlit app that:

* shows a table of 10â€“15 products (name, category, price)
* has a search box to find products by name

---

### ğŸŸ¦ Exercise 2 â€“ Streamlit Filter + Pagination

Extend Exercise 1:

* add a dropdown to filter by category
* add pagination so only 5 rows appear per page

---

### ğŸŸ¦ Exercise 3 â€“ NiceGUI Table

Create a NiceGUI app that:

* shows a list of students (name, class, marks) in `ui.table`
* adds a dropdown to filter by class
* adds a search box to find students by name

---
