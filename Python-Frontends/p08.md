# **Chapter 8. Designing Simple Backend APIs for Frontend Use**

## **1. Simple Introduction**

When creating a backend for your frontend screens, don’t start by thinking like a backend engineer.
Instead, think like a **UI designer**:

**“What data does my screen need to show?”**
**“What fields do I need to send when the user submits a form?”**

If you start from the UI side, your APIs become clean, simple, and easy to use.

---

## **2. Real-Life Analogy**

Imagine building a **shop counter**:

* You show a list of items → list screen
* When someone clicks an item → detail screen
* When someone fills a purchase form → form submission

The backend is like the **store room** that gives you exactly the items or details you need.
Your job: design doors (endpoints) that match each screen.

---

## **3. Key Concepts (Explained Gently)**

### **1) Request/Response Shape**

Your UI needs specific fields.
Your API must return those fields clearly and consistently.

### **2) List APIs**

Used to show tables, grids, dashboards.
Should support:

* pagination
* search
* filtering

### **3) Detail APIs**

Used when clicking one row to see more info.

### **4) Form Submission APIs**

Used when saving or updating data.

### **5) Versioning**

APIs evolve over time.
Version numbers (like `/v1/` or `/v2/`) protect old apps from breaking.

### **6) Naming Endpoints Clearly**

Developer-friendly names make life easy:

* `/users`
* `/users/{id}`
* `/users/{id}/orders`

No confusing names like `/getAllUserListControllerNew2`.

---

## **4. Step-by-Step Explanation**

### **Step 1: Start from your screen**

Ask:
“What should this screen show or accept?”

### **Step 2: Write down required fields**

Example list page (Product Table):

* id
* name
* price
* category
* in_stock

### **Step 3: Design the API response shape**

Keep it predictable and flat.

### **Step 4: Add pagination and filters**

This helps large data loads.

### **Step 5: Write request shape for forms**

Example form for adding product:

* name
* price
* category

### **Step 6: Add versioning**

Start with simple `/api/v1/...`.

### **Step 7: Keep naming clean and meaningful**

Forms → POST
Lists → GET
Detail → GET /id

---

## **5. API Shapes for Common UI Screens**

### **A) List Pages (Tables)**

UI needs:

* list of records
* total count
* pagination info

#### **Request**

```
GET /api/v1/products?page=1&limit=10&search=fan
```

#### **Response**

```json
{
  "items": [
    {"id": 1, "name": "Fan", "price": 900},
    {"id": 2, "name": "Cooler", "price": 2500}
  ],
  "total": 2,
  "page": 1,
  "limit": 10
}
```

### Why this shape?

Because your table screen will:

* show rows
* show total pages
* allow browsing next/previous

---

### **B) Detail Pages (One Record)**

UI needs full details of a single item.

#### **Request**

```
GET /api/v1/products/1
```

#### **Response**

```json
{
  "id": 1,
  "name": "Fan",
  "price": 900,
  "category": "Home",
  "description": "High-speed ceiling fan",
  "in_stock": true
}
```

### Why this shape?

Because a detail screen needs all fields, not a summary.

---

### **C) Form Submissions (Adding or Editing)**

#### **POST (Create)**

```
POST /api/v1/products
```

#### **Request Body**

```json
{
  "name": "Fan",
  "price": 900,
  "category": "Home"
}
```

#### **Response**

```json
{
  "message": "Created",
  "id": 1
}
```

#### **PUT (Update)**

```
PUT /api/v1/products/1
```

#### **Request Body**

```json
{
  "name": "Fan",
  "price": 950
}
```

#### **Response**

```json
{
  "message": "Updated"
}
```

This is exactly what your form needs to display success or errors.

---

## **6. Clean Naming & Versioning**

### **Good Names**

* `/api/v1/products`
* `/api/v1/products/1`
* `/api/v1/products/1/reviews`
* `/api/v1/users/1/orders`

### **Bad Names**

* `/api/v1/doEverythingForUsersNow`
* `/getItemsByNewMethod`
* `/getLatestDataWorkingFinal123`

### **Versioning**

Always start with `/v1/`:

* `/api/v1/...`
  Later you can add `/api/v2/...` without breaking old systems.

---

## **7. Simple Text Diagram**

```
UI Screen (Table)
      │
      ▼
GET /api/v1/products
      │
      ▼
Backend returns list (JSON)
```

```
UI Screen (Detail)
      │
      ▼
GET /api/v1/products/{id}
      │
      ▼
Backend returns full record (JSON)
```

```
UI Form (Save)
      │
      ▼
POST /api/v1/products
      │
      ▼
Backend stores data and returns confirmation
```

---

## **8. Example Code (FastAPI)**

```python
from fastapi import FastAPI
from typing import List

app = FastAPI()

products = [
    {"id": 1, "name": "Fan", "price": 900},
    {"id": 2, "name": "Cooler", "price": 2500}
]

@app.get("/api/v1/products")
def list_products():
    return {"items": products, "total": len(products)}

@app.get("/api/v1/products/{id}")
def get_product(id: int):
    for p in products:
        if p["id"] == id:
            return p
    return {"error": "Not found"}

@app.post("/api/v1/products")
def add_product(item: dict):
    item["id"] = len(products) + 1
    products.append(item)
    return {"message": "Created", "id": item["id"]}
```

---

## **9. How Codex Can Help You Here**

### Sample Prompts

1. **“Codex, generate list, detail, and form submission APIs for a ‘books’ screen.”**
2. **“Codex, convert my UI requirements into clean backend endpoints.”**
3. **“Codex, generate consistent JSON request and response shapes for my frontend.”**
4. **“Codex, help me version my API and rename old endpoints clearly.”**
5. **“Codex, check if my API names follow best practices.”**

Codex can take your UI sketch and directly create beautiful, clean backend routes.

---

## **10. Mini Exercises for Students**

### ✔️ Exercise 1

Design APIs for a **Student Management UI**:

* Student list page
* Student detail page
* Add student form

Write clean endpoints and JSON shapes.

---

### ✔️ Exercise 2

Design APIs for a **Sales Dashboard**:

* List of daily sales
* Detail for one day
* Add sales entry

---

### ✔️ Exercise 3

Rewrite an ugly endpoint name into a clean one:

Old:
`/getAllCustomerMainListDataController`
New:
`/api/v1/customers`

---
