# **Chapter 40. Creating Reusable UI Components**

---

## **1. Simple Introduction**

In real business apps, you often repeat the same UI patterns:

* Patient registration form
* Customer info form
* Table with filters
* Chart panel that loads from an API

Instead of rewriting the same code again and again, you can create **reusable components**.
These are like small “Lego blocks” that you can plug into any page.

This chapter teaches you how to build:

1. A **Reusable Form Component** (like `PatientForm`)
2. A **Reusable Table + Filter Component**
3. A **Reusable Chart Wrapper** that loads data from an API

---

## **2. Real-Life Analogy**

Think of **cookie cutters** in a bakery.

The baker does NOT shape each cookie by hand.
They use the same cookie cutter and produce perfect copies.

Reusable UI components work the same way.
Once you make a clean layout, you can drop it anywhere in your app without rewriting everything.

---

## **3. Key Concepts (Explained Simply)**

### **1. Reusable Form Component**

A function that creates a form with required fields and returns the values.
You can call it from many pages.

### **2. Reusable Table + Filter Component**

A ready-made mini-module that shows:

* A filter bar
* A table
* A refresh button

You can pass different API URLs to it.

### **3. Reusable Chart Wrapper**

A function that:

* Calls an API
* Converts response into chart-friendly data
* Draws a chart in one line

---

## **4. Step-by-Step Explanation**

### **A. Reusable Form Component**

1. Create a function like `patient_form()`.
2. Put all inputs inside it.
3. Return the collected values.
4. Use it anywhere.

### **B. Reusable Table + Filter Component**

1. Create a function `table_with_filter(api_url)`.
2. Add a dropdown/text filter.
3. Fetch filtered data and show in table.
4. Use the same function for products, patients, records, etc.

### **C. Reusable Chart Wrapper**

1. A function that takes `api_url` or `data`.
2. Makes API call.
3. Plots chart using plotly/matplotlib.
4. Add simple title + description.

This becomes a “plug-and-play” chart box.

---

## **5. Example UI Code – NiceGUI (Reusable Form)**

Here is a **reusable PatientForm**:

```python
from nicegui import ui

def patient_form():
    """Reusable patient form component."""
    with ui.column():
        name = ui.input("Patient Name")
        age = ui.input("Age", validation={"Age must be a number": lambda v: v.isdigit()})
        problem = ui.textarea("Main Complaint").props("rows=3")

    return name, age, problem

def page():
    ui.label("New Patient").classes("text-xl mb-4")
    name, age, problem = patient_form()

    def save():
        ui.notify(f"Saved: {name.value}, {age.value}, {problem.value}")

    ui.button("Save", on_click=save).classes("bg-blue-600 text-white")

ui.page("/", page)
ui.run()
```

You can now import and reuse `patient_form()` anywhere.

---

## **6. Example UI Code – Streamlit (Reusable Table + Filter)**

```python
import streamlit as st
import requests

def table_with_filter(api_url):
    st.subheader("Data Table")
    
    filter_text = st.text_input("Search")
    if st.button("Refresh"):
        pass  # button just triggers rerun

    params = {"search": filter_text} if filter_text else {}

    response = requests.get(api_url, params=params).json()

    st.table(response["items"])

# --------------------------
st.title("Patients List")
table_with_filter("http://localhost:8000/api/patients")
```

This same component works for:

* Patients
* Products
* Orders
* Stocks
* Employees

Just change the API link.

---

## **7. Example – Reusable Chart Wrapper**

Simple demo with Streamlit + Matplotlib:

```python
import streamlit as st
import requests
import matplotlib.pyplot as plt

def api_chart(api_url, title="Chart"):
    data = requests.get(api_url).json()
    labels = [item["label"] for item in data["rows"]]
    values = [item["value"] for item in data["rows"]]

    fig, ax = plt.subplots()
    ax.bar(labels, values)
    ax.set_title(title)
    st.pyplot(fig)

# Use it anywhere
st.title("Sales Overview")
api_chart("http://localhost:8000/api/sales/monthly", title="Sales per Month")
```

Now your charts are standardized — same color, same layout, same code.

---

## **8. How Codex Helps You Here**

Here are ready-made prompts you can give to Codex:

### **Prompt 1**

“Generate a reusable NiceGUI form component called PatientForm with name, age, and symptoms fields.”

### **Prompt 2**

“Create a reusable Table+Filter function for Streamlit that accepts an API URL and displays results cleanly.”

### **Prompt 3**

“Make a reusable chart wrapper in Streamlit that calls an API and draws a bar chart.”

### **Prompt 4**

“Convert this messy form into a clean reusable component.”

### **Prompt 5**

“Improve this chart function so it looks more professional.”

Codex can save hours of repetitive UI coding.

---

## **9. Mini Exercises for Students**

### **Exercise 1**

Create a reusable **DoctorForm** component with:

* name
* specialization
* years of experience

Use this component in two different pages.

---

### **Exercise 2**

Build a reusable **OrdersTable** component that:

* has a date filter
* takes an API URL
* shows orders list

---

### **Exercise 3**

Make a reusable **chart_box(api_url, chart_type="bar")** function.

Support:

* bar chart
* line chart

---
