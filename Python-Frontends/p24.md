# **Chapter 24. Routing and Multi-Page Apps**

## **1. Simple Introduction**

When your app grows, showing everything on **one big page** becomes confusing.
Users need **separate screens**:

* Login page
* Dashboard
* Profile page
* Settings
* Reports

Routing simply means **choosing which page to show** when the user clicks a button or opens a URL.

---

## **2. Real-Life Analogy**

Think of a **house with many rooms**.

* Living room
* Kitchen
* Bedroom
* Study room

You move between rooms by using the **doors**.

In the same way, your app has many “rooms,” and routing is like providing **doors** so users can move between them.

```
House
 ├── Living Room
 ├── Kitchen
 ├── Bedroom
 └── Study Room
```

Frontend app:

```
App
 ├── /login
 ├── /dashboard
 ├── /profile
 └── /settings
```

---

## **3. Key Concepts (Explained Gently)**

### **a) What is a Page?**

A page is simply a **separate screen** that shows different information and widgets.

### **b) What is Routing?**

Routing means:

> Deciding which page to show based on the URL or a button click.

Example URLs:

* `/login`
* `/dashboard`
* `/profile`

### **c) Why Multi-Page Apps?**

* Clean separation of screens
* Easier navigation
* Clear structure
* Professional look

---

## **4. Step-by-Step Explanation**

1. **Plan your pages** – Decide what separate screens your app needs.
2. **Create each page** as a separate function (NiceGUI) or file (Streamlit).
3. **Add navigation buttons or links**.
4. **Use routing library** to map URL → page function.
5. **Test switching between pages**.

---

## **5. Example UI Code (Streamlit Multi-Page)**

Streamlit makes multi-page apps **very easy**.

### **Folder Structure**

```
my_app/
  ├── Home.py
  ├── pages/
  │     ├── 1_Login.py
  │     ├── 2_Dashboard.py
  │     └── 3_Profile.py
```

### **Home.py**

```python
import streamlit as st

st.title("Welcome to My Multi-Page App")
st.write("Use the sidebar to navigate to other pages.")
```

### **pages/1_Login.py**

```python
import streamlit as st

st.title("Login Page")
st.write("This is where the login form will go.")
```

### **pages/2_Dashboard.py**

```python
import streamlit as st

st.title("Dashboard")
st.write("Graphs, tables, and reports will be shown here.")
```

### **pages/3_Profile.py**

```python
import streamlit as st

st.title("Profile Page")
st.write("User information will appear here.")
```

Streamlit automatically creates a sidebar navigation menu.

---

## **6. Example UI Code (NiceGUI Routing)**

NiceGUI lets you create **real URL paths** like `/login`, `/dashboard`.

### **Basic Router Example**

```python
from nicegui import ui

@ui.page('/')
def home_page():
    ui.label("Home Page")
    ui.link("Go to Login", '/login')

@ui.page('/login')
def login_page():
    ui.label("Login Page")
    ui.link("Go to Dashboard", '/dashboard')

@ui.page('/dashboard')
def dashboard_page():
    ui.label("Dashboard")
    ui.link("Go to Profile", '/profile')

@ui.page('/profile')
def profile_page():
    ui.label("Profile Page")
    ui.link("Back Home", '/')

ui.run()
```

**Explanation:**
Each `@ui.page('/path')` creates a new room in the “house.”

---

### **Routing With a Navigation Menu**

```python
from nicegui import ui

def menu():
    with ui.row():
        ui.link("Home", '/')
        ui.link("Dashboard", '/dashboard')
        ui.link("Profile", '/profile')

@ui.page('/')
def home_page():
    menu()
    ui.label("Welcome Home!")

@ui.page('/dashboard')
def dashboard_page():
    menu()
    ui.label("Dashboard Data Goes Here")

@ui.page('/profile')
def profile_page():
    menu()
    ui.label("Your Profile Details")

ui.run()
```

---

## **7. Backend API Example (Simple)**

When moving between pages like `/login` → `/dashboard`, you often need to pass:

* login token
* username
* selected filters
* selected patient

Example backend response:

```json
{
  "token": "abc123xyz",
  "user_id": 50,
  "name": "Santanu"
}
```

You store this in `session_state` (Streamlit) or `state` (NiceGUI) so it’s available on next page.

---

## **8. How Codex Helps You Here**

### **Prompt 1**

“Generate a Streamlit multi-page folder structure with Home, Login, Dashboard, Profile.”

### **Prompt 2**

“Generate NiceGUI routing code with /login, /dashboard, and /profile and store username in state.”

### **Prompt 3**

“Fix my NiceGUI router problem: pages are resetting state on navigation.”

### **Prompt 4**

“Create a navigation bar in NiceGUI to switch between pages without writing link buttons manually.”

### **Prompt 5**

“Rewrite my Streamlit multi-page app using cleaner folder structure and comments.”

---

## **9. Small Text Diagram**

```
Frontend Application
 ├── /login       → Login screen
 ├── /dashboard   → Main screen with charts
 └── /profile     → User information

Navigation
  │
  ▼
Router
  │
  ▼
Load the correct page
```

---

## **10. Mini Exercises for Students**

### **Exercise 1 — Streamlit**

Create a 3-page app:

* Home
* Student List
* Add Student

Use sidebar navigation.

---

### **Exercise 2 — NiceGUI**

Create URLs:

* `/home`
* `/products`
* `/cart`

Show simple text on each page.

---

### **Exercise 3 — NiceGUI + State**

Store a username on `/login`
and display it on `/dashboard`.

---
