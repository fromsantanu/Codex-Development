# **Chapter 46. Configuration & Environment Management**

## **1. Simple Introduction**

When we build apps, we often need to keep important information **outside the main code**.
For example:

* API URLs (where your backend is running)
* API keys
* Database passwords
* Mode of running (development or production)

Putting these directly inside your code is risky and also makes switching between environments harder.

This chapter will show you **how to use config files** like `config.py` and `.env` in a very simple way.

---

## **2. Real-Life Analogy**

Imagine you run a shop.

* Sometimes you open **normal shop hours** (development).
* Sometimes you open **festival hours** (production).

You don’t want to write the opening and closing times **on every page of your notebook**.
Instead, you keep one small page with all important shop settings.

Same idea in software:
We keep important values in **one small file** so the whole app can read from it.

---

## **3. Key Concepts (Explained Gently)**

### **Environment**

Just means: *What mode are you running in?*
Examples:

* `development` → for testing
* `production` → for real users

### **.env File**

A simple text file with key=value pairs.
Used to store secrets safely.

### **Config File (config.py)**

A Python file that reads `.env` and gives easy access to your settings.

### **Never Put Secrets in Code**

Passwords and keys should stay outside your main `.py` files.

---

## **4. Step-by-Step Explanation**

### **Step 1: Install python-dotenv**

```bash
pip install python-dotenv
```

### **Step 2: Create a `.env` file**

```
API_BASE_URL=https://dev.mybackend.com
OPENAI_KEY=sk-xxxxxx
MODE=development
```

Keep this file **out of GitHub**, so others cannot see your keys.

### **Step 3: Create `config.py`**

```python
from dotenv import load_dotenv
import os

load_dotenv()  # loads .env file

class Config:
    API_BASE_URL = os.getenv("API_BASE_URL")
    OPENAI_KEY = os.getenv("OPENAI_KEY")
    MODE = os.getenv("MODE", "development")
```

Now your app can use this like:

```python
from config import Config

print(Config.API_BASE_URL)
```

### **Step 4: Switch between Dev and Prod**

Make two `.env` files:

**.env.dev**

```
API_BASE_URL=http://localhost:8000
MODE=development
```

**.env.prod**

```
API_BASE_URL=https://clinic-api.com
MODE=production
```

When deploying, rename the correct file to `.env`.

### **Step 5: Keep Secrets Outside Your Code**

Wrong way:

```python
API_KEY = "sk-123456"   # Never do this
```

Correct way:

```
OPENAI_KEY=sk-123456
```

and load using `Config`.

---

## **5. Example UI Code (NiceGUI)**

A simple frontend showing the backend URL:

```python
from nicegui import ui
from config import Config

def main_page():
    ui.label(f"Connected to: {Config.API_BASE_URL}")

ui.run()
```

---

## **6. Backend API Example (Simple)**

Example GET request using your config:

```python
import requests
from config import Config

def get_patients():
    url = f"{Config.API_BASE_URL}/patients"
    response = requests.get(url)
    return response.json()
```

---

## **7. How Codex Can Help Here**

Here are sample prompts your students can use:

1. **“Generate a config.py file that loads all values from a .env file.”**
2. **“Modify this NiceGUI app so that backend URL comes from config.py.”**
3. **“Add switching logic: if MODE=development use local URL, else use production URL.”**
4. **“Check my code and tell me if I accidentally exposed any secrets.”**
5. **“Refactor my project to use a config class instead of hard-coded values.”**

Codex is very good at creating clean configuration structures.

---

## **8. Mini Exercises for Students**

### **Exercise 1**

Create a `.env` file with:

* API_BASE_URL
* MODE

Then write a simple `config.py` to load these.

### **Exercise 2**

Create a NiceGUI page that prints the MODE (`development` or `production`).

### **Exercise 3**

Write a small function using `requests` that calls a dummy API
(you can use `https://jsonplaceholder.typicode.com/posts`).

---
