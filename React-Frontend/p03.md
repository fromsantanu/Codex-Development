# Chapter 3. Calling backend REST APIs from React

## Introduction

Now we connect the frontend desk to the warehouse: React will call the backend REST API to load real customer data. We will pull a list of customers from `/api/customers` so the sales team sees live information.

## Key Concepts

- **React uses `fetch` or `axios` to talk to APIs.** Think of it as the front desk calling the warehouse to ask for stock levels.
- **`useEffect` handles side effects.** This hook runs the API call once when the component mounts, like a morning report request from the manager.
- **State stores API responses.** `useState` keeps the customer list so React can render it after the request returns.

## Step-by-step Implementation

1. **Set up state for customers and status flags.**

   ```jsx
   import { useEffect, useState } from 'react';

   function CustomerLoader() {
     const [customers, setCustomers] = useState([]);
     const [loading, setLoading] = useState(true);

     // API call will go here
     return (
       <div>
         <h1>Customer List</h1>
         {/* Render customer names */}
       </div>
     );
   }
   ```

2. **Fetch data from `/api/customers`.**

   ```jsx
   useEffect(() => {
     async function loadCustomers() {
       const response = await fetch('/api/customers');
       const data = await response.json();
       setCustomers(data);
       setLoading(false);
     }
     loadCustomers();
   }, []);
   ```

3. **Render the list once data arrives.**

   ```jsx
   return (
     <div>
       <h1>Customer List</h1>
       {loading ? (
         <p>Loading customers…</p>
       ) : (
         <ul>
           {customers.map((customer) => (
             <li key={customer.id}>{customer.name} ({customer.email})</li>
           ))}
         </ul>
       )}
     </div>
   );
   ```

4. **Sample API interaction.**

   ```
   GET /api/customers
   Response: [
     { "id": 1, "name": "Nina Patel", "email": "nina@example.com" },
     { "id": 2, "name": "Marco Ruiz", "email": "marco@example.com" }
   ]
   ```

## How to Use Codex Here

1. “Generate a React component that fetches `/api/customers`, stores the result in state, and shows each name in a list.”
2. “Add loading text that shows until the fetch finishes, and explain how `useEffect` dependency array keeps the request from repeating.”
3. “Turn the fetch logic into a custom hook called `useCustomers` that returns `customers` and `loading`.”
4. “Show how to replace `fetch` with `axios.get` and keep the same data flow.”

## Mini-Exercise

Expand the component to also fetch `/api/orders` after the customers arrive, and render a summary line like “Orders pending: {count}”.
