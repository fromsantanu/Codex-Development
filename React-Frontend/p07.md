# Chapter 7. Asking Codex to generate React components and hooks

## Introduction

Codex speeds up building UI pieces. In this chapter we show how to prompt Codex for components that list customers, fetch data, and wrap that logic into reusable hooks for our `/api/customers` and `/api/orders` endpoints.

## Key Concepts

- **Prompting Codex is like writing a ticket to a teammate.** Be specific about the data shape and UI layout you want.
- **Codex can return complete components.** Use those as a starting point, then tweak props or styling.
- **Hooks keep logic reusable.** Ask Codex to wrap fetch logic into `useCustomers` so multiple components can share it.

## Step-by-step Implementation

1. **Ask Codex for a component that fetches and shows customers.**

   ```jsx
   function CustomerList() {
     const [customers, setCustomers] = useState([]);
     useEffect(() => {
       fetch('/api/customers')
         .then((res) => res.json())
         .then(setCustomers);
     }, []);

     return (
       <ul>
         {customers.map((customer) => (
           <li key={customer.id}>{customer.name}</li>
         ))}
       </ul>
     );
   }
   ```

   Codex can generate the code above when you describe the API endpoint and desired JSX.

2. **Ask Codex to extract a hook.**

   ```jsx
   function useCustomers() {
     const [data, setData] = useState([]);
     useEffect(() => {
       fetch('/api/customers')
         .then((res) => res.json())
         .then(setData);
     }, []);
     return data;
   }
   ```

   Then use it:

   ```jsx
   function CustomerList() {
     const customers = useCustomers();
     return (
       <div>
         {customers.map((customer) => (
           <p key={customer.id}>{customer.name}</p>
         ))}
       </div>
     );
   }
   ```

3. **Combine `useCustomers` with backlog info from `/api/orders`.**

   Codex can help you write a second hook like `useOrderTotals` that hits `/api/orders/summary` and returns counts for a dashboard card.

## How to Use Codex Here

1. “Create a React component that fetches `/api/customers` on mount and displays each customer’s name and email.”
2. “Extract the fetch logic into a custom hook called `useCustomers`, returning an array and loading flag.”
3. “Create a dashboard card component that consumes `useOrderTotals` and displays total sales and monthly growth.”
4. “Refactor the list component to pass the customer array as a prop to a child component `CustomerRows`.”

## Mini-Exercise

Give Codex the prompt to build a component that fetches `/api/patients`, shows a loading spinner while fetching, and renders a message if the list is empty.
