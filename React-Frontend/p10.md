# Chapter 10. Sales Dashboard UI

## Introduction

This chapter builds a mini sales dashboard using `/api/orders` and `/api/orders/summary`. Think of it as the manager’s digital clipboard showing order counts, total revenue, and region filters so the team can focus on what matters.

## Key Concepts

- **Dashboard cards highlight metrics.** Each card is a quick glance at sales totals, like a daily sales report pinned to a wall.
- **Filters narrow the data.** Add dropdowns for regions (e.g., “North”, “Online”) and re-fetch the summary with a query parameter.
- **Summaries combine data.** Use `reduce` or map/tranform the API response to show totals and history.

## Step-by-step Implementation

1. **Fetch the summary metrics.**

   ```jsx
   const [summary, setSummary] = useState(null);
   const [region, setRegion] = useState('all');

   useEffect(() => {
     fetch(`/api/orders/summary?region=${region}`)
       .then((res) => res.json())
       .then(setSummary);
   }, [region]);
   ```

2. **Render simple cards.**

   ```jsx
   function DashboardCards({ summary }) {
     if (!summary) return <p>Loading dashboard…</p>;
     return (
       <div className="cards">
         <div className="card">
           <h3>Orders</h3>
           <p>{summary.order_count}</p>
         </div>
         <div className="card">
           <h3>Revenue</h3>
           <p>${summary.revenue}</p>
         </div>
       </div>
     );
   }
   ```

3. **Add a region filter.**

   ```jsx
   <select value={region} onChange={(event) => setRegion(event.target.value)}>
     <option value="all">All regions</option>
     <option value="north">North</option>
     <option value="online">Online</option>
   </select>
   ```

4. **Show recent orders list for context.**

   ```jsx
   const [orders, setOrders] = useState([]);

   useEffect(() => {
     fetch(`/api/orders?region=${region}`)
       .then((res) => res.json())
       .then(setOrders);
   }, [region]);
   ```

   Render:

   ```jsx
   <ul>
     {orders.map((order) => (
       <li key={order.id}>
         {order.customer_name} – ${order.total}
       </li>
     ))}
   </ul>
   ```

## How to Use Codex Here

1. “Generate a dashboard component that fetches `/api/orders/summary` and shows order count and revenue cards.”
2. “Add a select dropdown for regions that triggers a re-fetch of both the summary and the `/api/orders` list.”
3. “Introduce a helper `formatCurrency` function if Codex does not format the revenue nicely.”
4. “Refactor the order list into a `RecentOrders` child component that accepts the orders array as a prop.”

## Mini-Exercise

Add a small line chart (or simple bar list) that shows the last three days of orders using `/api/orders?days=3`; start with placeholder data if you need to.
